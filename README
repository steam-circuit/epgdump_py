python epgdump.py

USAGE: epgdump.py -n CHANNEL_NAME -i INPUT_FILE -o OUTPUT_FILE
  -h, --help          print help message
  -b, --bs            input file is BS channel
  -c, --cs            input file is CS channel
  -n, --channel-name  specify DTB channel identifier (e.g. ON TV JAPAN code)
  -f, --format        format xml
  -i, --input         specify ts file
  -o, --output        specify xml file

--formatオプションを使用するよりも、xmlstarletコマンドを使用し
た方がよい。
xmlstarlet format XML_FILE

番組検索用シェルスクリプト
function select_time() {
    xmlstarlet sel --encode utf-8 -t -m '//programme' -v '@start' -n $@ |
    python -c '
import datetime
import sys
for line in sys.stdin:
    str = line.split()
    if str:
        print datetime.datetime.strptime(str[0], "%Y%m%d%H%M%S")'
}
function select_anime() {
    xmlstarlet sel --encode utf-8 -t -m "//programme" \
        -m "category[contains(., 'アニメ')]" \
        -v 'normalize-space(../title)' -o '  ' -v '../@start' -n $@
}
function select_actor() {
    xmlstarlet sel --encode utf-8 -t -m "//programme" \
        -m "desc[contains(., '星野真里')]" \
        -v 'normalize-space(../title)' -o '  ' -v '../@start' -n $@
}
